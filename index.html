<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>正在处理</title>
</head>
<body>
<p id="status">正在检查服务状态，请稍候...</p>

<script type="text/javascript">
    var targetUrl = "http://[2409:8a62:5514:c6b0:5693:59ff:fe5a:ac49]:8088";
    var csFileUrl = "cs.txt";

    function fetchWithTimeout(resource, options = {}) {
        const { timeout = 8000 } = options;
        
        return Promise.race([
            fetch(resource),
            new Promise((_, reject) =>
                setTimeout(() => reject(new Error('timeout')), timeout)
            )
        ]);
    }

    fetchWithTimeout(targetUrl)
        .then(response => {
            if (response.ok) {
                // 目标URL可以访问，进行跳转
                window.location.href = targetUrl;
            } else {
                throw new Error("Response was not ok");
            }
        })
        .catch(error => {
            // 处理错误情况，读取cs.txt内容
            console.log("无法访问目标地址:", error);
            document.getElementById('status').innerText = '服务不可用，加载备用信息...';

            fetch(csFileUrl)
                .then(response => response.text())
                .then(text => {
                    document.body.innerHTML += `<pre>${text}</pre>`;
                })
                .catch(error => {
                    console.error("无法加载cs.txt文件:", error);
                    document.getElementById('status').innerText = '无法加载备用信息';
                });
        });
</script>

</body>
</html>
